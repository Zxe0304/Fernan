<!doctype html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Sarabun', sans-serif; }
  </style>
</head>

<body class="bg-slate-100 min-h-screen">
  <div class="max-w-3xl mx-auto p-6">

    <!-- Header -->
    <div class="bg-indigo-500 text-white p-6 rounded-xl shadow mb-6 text-center">
      <h1 class="text-3xl font-bold">üìö ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô</h1>
      <p class="mt-2 opacity-90">‡πÉ‡∏ä‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢</p>
    </div>

    <!-- Add Button -->
    <div class="text-center mb-6">
      <button id="addBtn" type="button"
        class="bg-green-500 text-white px-6 py-3 rounded-full font-bold shadow hover:bg-green-600">
        ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô
      </button>
    </div>

    <!-- Form -->
    <form id="form" class="bg-white p-6 rounded-xl shadow mb-6 hidden">
      <h2 id="formTitle" class="text-xl font-bold mb-4">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô</h2>

      <input id="title" required
        class="w-full p-3 border rounded mb-3"
        placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô">

      <input id="subject" required
        class="w-full p-3 border rounded mb-3"
        placeholder="‡∏ß‡∏¥‡∏ä‡∏≤">

      <label class="block mb-1 font-semibold">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡πà‡∏á</label>
      <input type="date" id="dueDate" required
        class="w-full p-3 border rounded mb-4">

      <div class="flex gap-3">
        <button type="submit"
          class="flex-1 bg-indigo-500 text-white p-3 rounded font-bold">
          üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
        </button>
        <button type="button" id="cancelBtn"
          class="flex-1 border p-3 rounded font-bold">
          ‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
        </button>
      </div>
    </form>

    <!-- List -->
    <div id="list" class="space-y-4"></div>

  </div>

<script>
/* ---------------- LocalStorage ---------------- */
const STORAGE_KEY = "homework_list";
let homework = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
let editingId = null;

/* ---------------- Elements ---------------- */
const list = document.getElementById("list");
const form = document.getElementById("form");
const addBtn = document.getElementById("addBtn");
const cancelBtn = document.getElementById("cancelBtn");
const formTitle = document.getElementById("formTitle");

/* ---------------- Render ---------------- */
function render() {
  list.innerHTML = "";

  if (homework.length === 0) {
    list.innerHTML = `<p class="text-center opacity-60">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô</p>`;
    return;
  }

  homework.forEach(hw => {
    const div = document.createElement("div");
    div.className = "bg-white p-4 rounded-xl shadow flex justify-between items-center";

    div.innerHTML = `
      <div>
        <h3 class="font-bold ${hw.completed ? 'line-through text-gray-400' : ''}">
          ${hw.title}
        </h3>
        <p class="text-sm opacity-70">üìò ${hw.subject}</p>
        <p class="text-sm">‚è∞ ‡∏™‡πà‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${hw.dueDate}</p>
      </div>
      <div class="flex gap-2">
        <button type="button" data-id="${hw.id}"
          class="doneBtn bg-green-500 text-white px-3 py-1 rounded">
          ${hw.completed ? "‚Ü©Ô∏è" : "‚úì"}
        </button>
        <button type="button" data-id="${hw.id}"
          class="editBtn bg-yellow-400 px-3 py-1 rounded">
          ‚úèÔ∏è
        </button>
        <button type="button" data-id="${hw.id}"
          class="deleteBtn bg-red-500 text-white px-3 py-1 rounded">
          üóëÔ∏è
        </button>
      </div>
    `;
    list.appendChild(div);
  });
}

/* ---------------- Save ---------------- */
function save() {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(homework));
  render();
}

/* ---------------- Events ---------------- */
addBtn.onclick = () => {
  form.reset();
  editingId = null;
  formTitle.textContent = "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô";
  form.classList.remove("hidden");
};

cancelBtn.onclick = () => {
  form.classList.add("hidden");
};

form.onsubmit = e => {
  e.preventDefault();

  const newHw = {
    id: editingId || Date.now().toString(),
    title: title.value,
    subject: subject.value,
    dueDate: dueDate.value,
    completed: false
  };

  if (editingId) {
    homework = homework.map(h => h.id === editingId ? newHw : h);
  } else {
    homework.push(newHw);
  }

  save();
  form.classList.add("hidden");
};

list.onclick = e => {
  const id = e.target.dataset.id;
  if (!id) return;

  if (e.target.classList.contains("doneBtn")) {
    homework = homework.map(h =>
      h.id === id ? { ...h, completed: !h.completed } : h
    );
  }

  if (e.target.classList.contains("editBtn")) {
    const hw = homework.find(h => h.id === id);
    title.value = hw.title;
    subject.value = hw.subject;
    dueDate.value = hw.dueDate;
    editingId = id;
    formTitle.textContent = "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô";
    form.classList.remove("hidden");
  }

  if (e.target.classList.contains("deleteBtn")) {
    if (confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà")) {
      homework = homework.filter(h => h.id !== id);
    }
  }

  save();
};

/* ---------------- Init ---------------- */
render();
</script>
</body>
</html>
